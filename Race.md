【任务描述】

  请在正确性测试的基础上，为编译器实现代码优化功能。输入输出及处理要求如下：

   （1）将源文件（统一命名为testfile.txt）编译生成MIPS汇编并输出到文件中（统一命名为mips.txt），具体要求包括：

     a）自行设计中间代码数据结构，再从中间代码生成MIPS汇编。

     b）自行调试时，可使用MARS仿真器，提交到平台的编译器只需要能按统一的要求生成MIPS汇编代码文件即可，MARS仿真器及使用说明请下载平台中提供的版本。

   （2）优化的要求如下：

     a）代码生成时合理利用寄存器，包括全局寄存器和临时寄存器，建议使用规范的全局寄存器分配方法（例如引用计数或图着色算法）分配全局寄存器，使用临时寄存器池管理和分配临时寄存器。遵循MIPS的寄存器使用规范和调用规范，并能生成较高质量的目标代码；

     b）建议实现基本块内部的公共子表达式删除（DAG图）优化；

     c）建议通过数据流分析（活跃变量分析或者到达定义分析）实现较复杂的全局优化，例如循环不变代码外提、死代码删除等。 

     d）建议实现编译典型优化，例如代码内联、常量传播、复制传播、窥孔优化等；

     e) 优化最终评分依据为竞速排名结果，完成优化的数量、种类、生成代码质量等因素，不作为评分依据。

【输入形式】testfile.txt为符合文法要求的测试程序，另外可能存在来自于标准输入的数据。

【输出形式】按如上要求将目标代码生成结果输出至mips.txt中，并输出优化前后的中间代码，中文字符的编码格式要求是UTF-8。

【评分要求】根据得到的汇编代码的运行时间的值排名，运行时间越小排名越靠前。对于每一个testfile的得分单独计算，每位同学的得分=单个测试点分数*所有参赛同学中此测试点的最小运行时间 / 同学个人的测试点运行时间。

        *排行榜设置的分数只为直观展示整体得分比例，不代表最终得分以及名次，汇总成绩时将按上述的标准进行折算。

【样例（testfile1）】

int d = 4;

int hhh(int i){
    int c = i * i;
    if (i == 1) {
        return 1;
    }
    if (i == 2) {
        return 2;
    }
    c = c * c % 10;
    return hhh(i - 1) + hhh(i - 2);
}

int main () {
    int i = 2,j = 5;
    i = getint();
    j = getint();
    j = 7*5923/56*56 - hhh(hhh(3)) + (1+2-(89/2*36-53) /1*6-2*(45*56/85-56+35*56/4-9));
    int k = -+-5;
    int n = 10;
    while (n < k*k*k*k*k*k) {
        d = d * d % 10000;
        n = n + 1;
    }
    printf("%d, %d, %d\n", i, j, k);
    return 0;
}
【样例输入】

4
5
【样例输出】

4, 31346, 5
【排行榜说明】

所有测试程序的运行结果均完全正确，则可进入排行榜。

排行榜会展示编译器生成的汇编代码运行中不同的操作类型（ DIV、MULT、JUMP/BRANCH、MEM 和 OTHER）。其中，不同的操作类型在执行时对整体执行时间的贡献程度不同，大致为 DIV >> MULT > MEM > JUMP/BRANCH > OTHER。请同学们在优化过程中，以此为参考，尽量减少执行时间长的语句的执行。

【开发语言及环境】

    用 C/C++/JAVA 实现，评测机安装的 C/C++ 开发环境是 CLion 2018.3.4 和 CodeBlocks 20.03；Java 的开发环境为 IDEA 2018.3.6 社区版。产生的 MIPS 汇编在 Mars 模拟器（更正版）上运行，平台支持 C++11 标准。评测机所采用的编译学生代码的版本是：C/C++ gcc 8.1.0，Java jdk 1.8。